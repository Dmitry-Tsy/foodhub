/**
 * Умные рекомендации ингредиентов на основе названия блюда
 */

// База данных ингредиентов для популярных блюд
const INGREDIENT_DATABASE: Record<string, string[]> = {
  // Итальянская кухня
  'паста': ['макароны', 'паста', 'оливковое масло', 'чеснок', 'пармезан'],
  'карбонара': ['макароны', 'бекон', 'яйца', 'пармезан', 'черный перец'],
  'болоньезе': ['макароны', 'фарш говяжий', 'томаты', 'лук', 'морковь', 'сельдерей'],
  'лазанья': ['листы лазаньи', 'фарш', 'моцарелла', 'пармезан', 'томатный соус', 'бешамель'],
  'ризотто': ['рис арборио', 'лук', 'белое вино', 'пармезан', 'бульон'],
  'пицца': ['тесто', 'моцарелла', 'томатный соус'],
  'маргарита': ['тесто', 'моцарелла', 'томатный соус', 'базилик'],
  'пепперони': ['тесто', 'моцарелла', 'пепперони', 'томатный соус'],
  
  // Русская кухня
  'борщ': ['свекла', 'капуста', 'морковь', 'лук', 'томатная паста', 'мясо', 'сметана'],
  'щи': ['капуста', 'морковь', 'лук', 'томатная паста', 'мясо'],
  'пельмени': ['тесто', 'фарш говяжий', 'лук', 'сметана'],
  'гречка': ['гречка', 'лук', 'мясо'],
  'плов': ['рис', 'мясо', 'морковь', 'лук', 'чеснок', 'куркума'],
  'котлеты': ['фарш', 'лук', 'яйцо', 'хлеб', 'молоко'],
  
  // Японская кухня
  'суши': ['рис для суши', 'нори', 'рыба', 'авокадо', 'огурец', 'имбирь', 'васаби', 'соевый соус'],
  'роллы': ['рис для суши', 'нори', 'рыба', 'авокадо', 'огурец', 'крем-сыр'],
  'сашими': ['рыба', 'имбирь', 'васаби', 'соевый соус'],
  'рамен': ['лапша', 'бульон', 'яйцо', 'нори', 'зеленый лук', 'курица'],
  'темпура': ['овощи', 'рыба', 'мука', 'яйцо', 'темпура соус'],
  
  // Салаты
  'цезарь': ['салат романо', 'курица', 'пармезан', 'сухарики', 'соус цезарь'],
  'греческий': ['помидоры', 'огурцы', 'оливки', 'фета', 'оливковое масло'],
  'оливье': ['картофель', 'морковь', 'яйца', 'колбаса', 'огурцы', 'майонез'],
  
  // Десерты
  'тирамису': ['маскарпоне', 'кофе', 'печенье савоярди', 'какао', 'яйца', 'сахар'],
  'чизкейк': ['творожный сыр', 'печенье', 'сливочное масло', 'сахар', 'яйца', 'сметана'],
  'панкейки': ['мука', 'яйца', 'молоко', 'сахар', 'разрыхлитель', 'сироп'],
  
  // Мясо
  'стейк': ['говядина', 'соль', 'перец', 'розмарин', 'чеснок', 'сливочное масло'],
  'шашлык': ['мясо', 'лук', 'специи', 'лимон'],
  'курица': ['курица', 'соль', 'перец', 'чеснок'],
  
  // Рыба
  'лосось': ['лосось', 'лимон', 'соль', 'перец', 'укроп'],
  'тунец': ['тунец', 'оливковое масло', 'лимон', 'соль', 'перец'],
  
  // Бургеры
  'бургер': ['булочка', 'котлета', 'сыр', 'салат', 'помидор', 'лук', 'соус'],
  'чизбургер': ['булочка', 'котлета', 'сыр чеддер', 'салат', 'помидор', 'лук', 'кетчуп'],
};

/**
 * Получает рекомендации ингредиентов на основе названия блюда
 */
export const getIngredientSuggestions = (dishName: string): string[] => {
  if (!dishName || dishName.length < 2) {
    return [];
  }

  const normalizedName = dishName.toLowerCase().trim();
  
  // Ищем точное совпадение
  if (INGREDIENT_DATABASE[normalizedName]) {
    return INGREDIENT_DATABASE[normalizedName];
  }
  
  // Ищем частичное совпадение (блюдо содержит ключевое слово)
  for (const [key, ingredients] of Object.entries(INGREDIENT_DATABASE)) {
    if (normalizedName.includes(key) || key.includes(normalizedName.split(' ')[0])) {
      return ingredients;
    }
  }
  
  // Если не нашли, возвращаем базовые ингредиенты для популярных типов блюд
  if (normalizedName.includes('паста') || normalizedName.includes('макароны')) {
    return ['макароны', 'оливковое масло', 'чеснок', 'пармезан'];
  }
  
  if (normalizedName.includes('салат')) {
    return ['салат', 'помидоры', 'огурцы', 'оливковое масло'];
  }
  
  if (normalizedName.includes('суп')) {
    return ['бульон', 'морковь', 'лук', 'картофель'];
  }
  
  if (normalizedName.includes('мясо') || normalizedName.includes('стейк')) {
    return ['мясо', 'соль', 'перец', 'чеснок'];
  }
  
  if (normalizedName.includes('рыба') || normalizedName.includes('лосось')) {
    return ['рыба', 'лимон', 'соль', 'перец'];
  }
  
  if (normalizedName.includes('десерт') || normalizedName.includes('торт')) {
    return ['мука', 'сахар', 'яйца', 'сливочное масло'];
  }
  
  return [];
};

/**
 * Получает все доступные ингредиенты для автокомплита
 */
export const getAllIngredients = (): string[] => {
  const allIngredients = new Set<string>();
  
  Object.values(INGREDIENT_DATABASE).forEach(ingredients => {
    ingredients.forEach(ingredient => allIngredients.add(ingredient));
  });
  
  // Добавляем популярные ингредиенты
  const commonIngredients = [
    'соль', 'перец', 'сахар', 'мука', 'яйца', 'молоко', 'сливочное масло',
    'оливковое масло', 'подсолнечное масло', 'лук', 'чеснок', 'морковь',
    'помидоры', 'огурцы', 'картофель', 'капуста', 'перец болгарский',
    'зелень', 'укроп', 'петрушка', 'базилик', 'розмарин', 'тимьян',
    'лимон', 'лайм', 'сметана', 'майонез', 'кетчуп', 'горчица',
  ];
  
  commonIngredients.forEach(ingredient => allIngredients.add(ingredient));
  
  return Array.from(allIngredients).sort();
};

